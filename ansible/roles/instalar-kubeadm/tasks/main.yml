---
# tasks file for instalar-kubeadm
- name: "Instalar kubeadm"
  ansible.builtin.apt:
    name: ["apt-transport-https", "ca-certificates", "curl"]
    state: present
    update_cache: true
- name: "Adicionar key apt e preparar reposit√≥rio"
  vars:
    commands:
      - curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
      - echo "deb https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
  ansible.builtin.shell:      
    cmd: "{{ item }}"
  loop: "{{ commands }}"
- name: "Instalar kubectl, kubeadm e kubelet"
  ansible.builtin.apt:
    name: ["kubelet", "kubeadm", "kubectl"]
    state: present
    update_cache: true